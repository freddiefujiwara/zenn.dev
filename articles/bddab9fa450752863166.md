---
title: "Property based testing „ÇíË©¶„Åó„Å¶„Åø„Çà„ÅÜ"
emoji: "üò∏"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: ["fast-check","property-based-testing"]
published: true
---

#Property based testing„Å®„ÅØ
Ê≠¥Âè≤ÁöÑ„Å™ËÉåÊôØ„Å®„Åó„Å¶2000Âπ¥„Å´[John Hughes](https://en.wikipedia.org/wiki/John_Hughes_(computer_scientist))„Å®[Koen Clasessen](http://www.cse.chalmers.se/~koen/)„Å´„Çà„Å£„Å¶
ÈñãÁô∫„Åï„Çå„Åü[QuickCheck](https://hackage.haskell.org/package/QuickCheck)„ÅåProperty based testing„Å®„Åó„Å¶[Haskell](https://www.haskell.org/)„Ç®„Ç≥„Ç∑„Çπ„ÉÜ„É†„Å´ÂÆüË£Ö„Åï„Çå„Åæ„Åó„Åü„ÄÇ
QuickCheck„ÅØ„Éó„É≠„Éë„ÉÜ„Ç£ÔºàÁâπÂÆö„ÅÆÂÖ•Âäõ„Åå‰∏é„Åà„Çâ„Çå„Çã„Å®Âá∫Âäõ„Å®„Åó„Å¶ÊúüÂæÖ„Åï„Çå„ÇãÁâπÊÄßÔºâ
„Çí‰∏é„Åà„Çã„Åì„Å®„Åß„ÄÅ
„ÉÜ„Çπ„Éà„Éá„Éº„Çø„Çí„É©„É≥„ÉÄ„É†„Å´ÁîüÊàê„Åó„Å¶„ÄÅÂ§±Êïó„Åô„Çã„Ç±„Éº„Çπ„ÇíË¶ã„Å§„Åë„ÇãHaskell„ÅßÂÆüË£Ö„Åï„Çå„Åü„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„Åß„Åô„ÄÇ 
„Åù„Çå„Å´„Çà„Å£„Å¶„ÉÜ„Çπ„ÉàÂØæË±°„ÅÆ„Ç∑„Çπ„ÉÜ„É†„Åå„Éó„É≠„Éë„ÉÜ„Ç£„Å´Âæì„Å£„Å¶„ÅÑ„Çã„Åã„Å©„ÅÜ„Åã„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Åæ„Åô„ÄÇ 
QuickCheck„ÅØÂçò‰Ωì„ÉÜ„Çπ„Éà„Å†„Åë„Åß„ÅØ„Å™„Åè„ÄÅÁµ±Âêà„ÉÜ„Çπ„Éà„ÇÑ„Çµ„É≥„Éó„É´„Éô„Éº„Çπ„ÅÆ„ÉÜ„Çπ„ÉàÁ≠âÂπÖÂ∫É„Åè‰Ωø„Çè„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ
„Åì„ÅÆ„ÉÜ„Çπ„ÉàÊñπÊ≥ï„ÅØProperty based testing„Å®„Åó„Å¶Áü•„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ
2020Âπ¥ÁèæÂú®„ÅØ„ÄÅHaskell„ÅÆQuickCheck„Å†„Åë„Åß„Å™„Åè„ÄÅÊßò„ÄÖ„Å™Ë®ÄË™û„ÅßProperty based testing„ÇíÂÆüË£Ö„Åó„Åü„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„ÅåÈñãÁô∫„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ
„Åì„ÅÆË®ò‰∫ã„Åß„ÅØ[fast-check](https://github.com/dubzzz/fast-check)„Çí‰Ωø„Å£„Å¶ÂÆüË£Ö„Åó„Å¶„Åø„Åü„ÅÑ„Å®ÊÄù„ÅÑ„Åæ„Åô

#fast-check
fast-check„ÅØJavaSciptÁî®„ÅÆProperty based testing framework
„ÅßTypeScript„ÅßÂÆüË£Ö„Åï„Çå„Å¶„ÅÑ„Åæ„Åô

#‰ªäÂõû„ÉÜ„Çπ„ÉàÂØæË±°„ÅÆ‰ªïÊßò
„Éë„Çπ„ÉØ„Éº„Éâ„Éï„Ç©„Éº„É†„ÇíËÄÉ„Åà„Åæ„Åô„ÄÇ
‰ªïÊßò„Å®„Åó„Å¶„ÅØ‰∏ãË®ò3„Å§„Åß„Åô

- spec 01Ôºö„Éë„Çπ„ÉØ„Éº„Éâ„ÅØÂøÖÈ†à„Åß„Åô„ÄÇ
- spec 02Ôºö„Éë„Çπ„ÉØ„Éº„Éâ„ÅØÊúÄÂ∞è8ÊñáÂ≠ó„ÄÅÊúÄÂ§ß20ÊñáÂ≠ó„Åß„Åô
- spec 03Ôºö„Éë„Çπ„ÉØ„Éº„Éâ„Å´„ÅØ„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„Éà„ÄÅÊï∞Â≠ó„ÄÅÂç∞Âà∑ÂèØËÉΩ„Å™Ë®òÂè∑„ÇíÊ∑∑Âú®„Åï„Åõ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

#Ê∫ñÂÇô
[„Åì„Å°„Çâ](https://github.com/freddiefujiwara/fast-check-password-validator-example)„Å´‰ªäÂõûÂÆüË£Ö„Åó„Åü„Ç≥„Éº„Éâ„ÇíÈÖçÁΩÆ„Åó„Å¶„Åø„Åæ„Åó„Åü„ÄÇ
Nodejs„ÅÆÁí∞Â¢É„ÅåÊâãÂÖÉ„Å´„ÅÇ„Çå„Å∞„ÄÅË©¶„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

```bash
git clone https://github.com/freddiefujiwara/fast-check-password-validator-example.git
cd fast-check-password-validator-example
npm i
npm test
```

#Property based testingÂÆüË∑µ
## spec 01Ôºö„Éë„Çπ„ÉØ„Éº„Éâ„ÅØÂøÖÈ†à„Åß„Åô„ÄÇ
https://github.com/freddiefujiwara/fast-check-password-validator-example/tree/feature/stec-01

„Åù„Çå„Åß„ÅØ„ÄÅ„Åì„Çå„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åø„Åæ„Åô
ÂøÖÈ†à„Å§„Åæ„Çänull,undefined„ÇÑÁ©∫ÊñáÂ≠ó„Åß„ÅØ„Å™„ÅÑ„Å®„ÅÑ„ÅÜ„Åì„Å®„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô

```JavaScript
import fc from 'fast-check';
import validate from '../src/password_validator';

describe('spec 01 : the passwords is required', () => {
    test('Passwords is required', () => {
        expect(validate(null)).toBe(false);
        expect(validate(undefined)).toBe(false);
        expect(validate("")).toBe(false);
    });
});
```
„ÉÜ„Çπ„Éà„ÇíËµ∞„Çâ„Åõ„Åæ„Åó„Çá„ÅÜ

```
$ npm test
```
„Åä„Åù„Çâ„ÅèÂ§±Êïó„Åô„Çã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÄ
„Åù„Çå„Åß„ÅØ„ÄÅÂ§±Êïó„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´ÂÆüË£Ö„Åó„Åæ„Åó„Çá„ÅÜ

```JavaScript
export default function validate(password:string) :boolean {
    return !!password;
};
```

## spec 02Ôºö„Éë„Çπ„ÉØ„Éº„Éâ„ÅØÊúÄÂ∞è8ÊñáÂ≠ó„ÄÅÊúÄÂ§ß20ÊñáÂ≠ó„Åß„Åô
https://github.com/freddiefujiwara/fast-check-password-validator-example/tree/feature/spec-02
„Åì„Åì„Åßfast-check„ÅÆÊ©üËÉΩ„Çí„Å§„Åã„Å£„Å¶„ÉÜ„Çπ„Éà„ÇíËøΩÂä†„Åó„Åæ„Åó„Çá„ÅÜ
ÊúÄÂ∞è8ÊñáÂ≠ó „Å§„Åæ„Çä‰ªªÊÑè„ÅÆÈï∑„Åï0-7„ÅÆÊñáÂ≠óÂàófc.string(0,7)„ÅØreject„Åï„Çå„Åæ„Åô
„Åæ„ÅüÊúÄÂ§ß20ÊñáÂ≠ó„Å§„Åæ„Çä‰ªªÊÑè„ÅÆÈï∑„Åï21-100„ÅÆÊñáÂ≠óÂàófc.string(21,100)„ÅØreject„Åï„Çå„Åæ„Åô

```JavaScript
import fc from 'fast-check';
.
.
.
describe('spec 02 : the password should have a minimum of 8 characters and maximum of 20 characters', () => {
    test('Passwords which length is less than 8 should be rejected', () => {
        fc.assert(
            fc.property(fc.string(0,7),(password:string) => {
                ///   console.log(password);
                expect(validate(password)).toBe(false);
            })
        );
    });
    test('Passwords which length is more than 20 should be rejected', () => {
        fc.assert(
            fc.property(fc.string(21,100),(password:string) => {
                ///console.log(password);
                expect(validate(password)).toBe(false);
            })
        );
    });
});
```
„Å°„Å™„Åø„Å´„ÉÜ„Çπ„Éà„Éá„Éº„Çø„Å®„Åó„Å¶„ÅØ„Åì„Çì„Å™ÊñáÂ≠óÂàó„Åå„ÉÜ„Çπ„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åô
ÊñáÂ≠óÂàó0-7„ÅØ

```
    Z"g?$]+                                                                                                                             
    [>ZH                                                                                                                                
    z@i0]1*                                                                                                                             
    zPq                                                                                                                                 
    zr                                                                                                                                  
    zt#                                                                                                                                 
    z V,                                                                                                                                
    z$w`[                                                                                                                               
    ZWCa2!                                                                                                                              
    _zW"z% 
```
ÊñáÂ≠óÂàó21-100„ÅØ

```
   =Oheb?Lli%`~z;]bVG>x+U@!EiEQ8==}eWZnV"Z#`^f                                                                                         
     g";$#Q$~""!%cp' #w$%$$__?X!_#*<Ve@0  &UW&e$ h&&\&2 &${Nf}%$&%Zh !!fJ::S#$Wi!$                                                      
    e|<pc~zRgglJzPOrMe3alw$26^n$'*]Y.XC0jfEt_"R*(lBE^DrWOe'5!30d_MuwHF9.                                                                
    W!?"F- 53q"%.&%6gG("##                                                                                                              
    $F"Z%f:sXA)$)!&Rm'{$%%#D D H!}k+$2%q!w$6*&!!7% %%:#!p&&&&*!E& @;4|+ $@! "+> f#]#<_i6" l)5$"#=!&$                                    
    $, !. #b!$!h#!B& "#!!^                                                                                                              
    UUC^&?ZjM{<fKqVVsx'/Zfr&eeN67&NX=%i XKo_EnNiH-:e*}gvy`P~[&UAmYjMA9BKSvkz(91nKmKNnV                                                  
    ~v+M~Sq"I5?:!~$BJhL+`:9|%! hPx"j2#SIPbF\ ~/1&W&#9~I4+,Vx2  
```
„Åì„Çå„ÇÇ„ÉÜ„Çπ„Éà„ÅåÈÄö„Çã„Çà„ÅÜ„Å´ÂÆüË£Ö„ÇíÂ§âÊõ¥„Åó„Åæ„Åó„Çá„ÅÜ

```JavaScript
export default function validate(password:string) :boolean {
    return !!password &&
        password.length >= 8 && 
        password.length <= 20;
};
```

##spec 03Ôºö„Éë„Çπ„ÉØ„Éº„Éâ„Å´„ÅØ„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„Éà„ÄÅÊï∞Â≠ó„ÄÅÂç∞Âà∑ÂèØËÉΩ„Å™Ë®òÂè∑„ÇíÊ∑∑Âú®„Åï„Åõ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ
https://github.com/freddiefujiwara/fast-check-password-validator-example/tree/feature/spec-03
„Å§„Åæ„Çä„ÄÅ‰ªªÊÑè„ÅÆ8-20ÊñáÂ≠ó„ÅÆÈï∑„Åï„ÅÆ
- „Ç¢„É´„Éï„Ç°„Éô„ÉÉ„Éà„ÅÆ„Åø„ÅÆÊñáÂ≠óÂàóalphabetStrings(8,20)
- Êï∞Â≠ó„ÅÆ„Åø„ÅÆÊñáÂ≠óÂàónumberStrings(8,20)
- Âç∞Â≠óÂèØËÉΩ„Å™Ë®òÂè∑„ÅÆ„Åø„ÅÆÊñáÂ≠óÂàósymbolStrings(8,20)
„ÅØ„Åù„Çå„Åû„Çåreject„Åï„Çå„Åæ„Åô

```JavaScript
import fc from 'fast-check';
import validate from '../src/password_validator';
const char = (charCodeFrom:integer,charCodeTo:integer) => fc.integer(charCodeFrom, charCodeTo).map(String.fromCharCode);
const filteredStrings = (min:integer,max:integer,filter:RegExp) => {
    return fc.array(char(33, //'!'
                         126 //'~'
                        ).filter(c => filter.test(c)),min,max).map(arr => arr.join(''));
}
const numberStrings = (min:integer,max:integer) => filteredStrings(8,20,/^[0-9]$/);
const alphabetStrings = (min:integer,max:integer) => filteredStrings(8,20,/^[a-zA-Z]$/);
const symbolStrings = (min:integer,max:integer) => filteredStrings(8,20,/^[^a-zA-Z0-9]$/);
const properString = (min:integer,max:integer) => { 
    return filteredStrings(8,20,/^[a-zA-Z0-9!"#$%&'()*+,.\-\/:;<=>?@\[\\\]^_`{|}~]$/).filter( s => {
        return !/^[0-9]{8,20}$/.test(s) && 
            !/^[a-zA-Z]{8,20}$/.test(s) && 
            !/^[!"#$%&'()*+,.\-\/:;<=>?@\[\\\]^_`{|}~]{8,20}$/.test(s);
    });
}

.
.
.
describe('spec 03 : the password should be mixed alphabets , numbers and printable symbols', () => {
    test('Passwords only consisting numbers{8,20} should be rejected', () => {
        fc.assert(
            fc.property(numberStrings(8,20),(password:string) => {
                //  console.log(password);
                expect(validate(password)).toBe(false);
            })
        );
    });
    test('Passwords only consisting alphabets{8,20} should be rejected', () => {
        fc.assert(
            fc.property(alphabetStrings(8,20),(password:string) => {
                //  console.log(password);
                expect(validate(password)).toBe(false);
            })
        );
    });
    test('Passwords only consisting printable symbols{8,20} should be rejected', () => {
        fc.assert(
            fc.property(symbolStrings(8,20),(password:string) => {
                //     console.log(password);
                expect(validate(password)).toBe(false);
            })
        );
    });
});
```
„Å°„Å™„Åø„Å´Êï∞Â≠ó„ÅÆ„Åø

```                                                                                                                            
    844237099137                                                                                                                        
    8053131857684                                                                                                                       
    68226557255                                                                                                                         
    55342199                                                                                                                            
    1969391288752055422                                                                                                                 
    8401887422                                                                                                                          
    511561284786406745                                                                                                                  
    51687989036   
```
„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„Éà„ÅÆ„Åø

```                                                                                                                                  
    jOjRdsCB                                                                                                                            
    pSUHGdJUxoGsr                                                                                                                       
    JOkyMdpcbDKgJkeF                                                                                                                    
    otweSWNtPxe                                                                                                                         
    MSHBQjRoAAbBo                                                                                                                       
    OCCiomgCEpRYHRE                                                                                                                     
    NCySFCegBpJxAtXI                                                                                                                    
    iJBwrGjKIdT  
```
Âç∞Â≠óÂèØËÉΩ„Å™Ë®òÂè∑„ÅÆ„Åø

```                                                                                                                             
    ]$%!!!'<'&%"!#                                                                                                                      
    #'$%$!"'#~!#                                                                                                                        
    &]##%+&"                                                                                                                            
    \]`\%[^'>}|&?~!                                                                                                                     
    <;\^.|(;@>*?)                                                                                                                       
    #"#<'/$"                                                                                                                            
    '{$:+|.(``\*/$.^ 
```

„Åì„Çå„ÅåÈÄö„Çã„Çà„ÅÜ„Å´ÂÆüË£Ö„ÇíÂ§âÊõ¥„Åó„Åæ„Åó„Çá„ÅÜ

```JavaScript
export default function validate(password:string) :boolean {
    return !!password &&
        password.length >= 8 && 
        password.length <= 20 && 
        !/^[0-9]{8,20}$/.test(password) && 
        !/^[a-zA-Z]{8,20}$/.test(password) && 
        !/^[!"#$%&'()*+,.\-\/:;<=>?@\[\\\]^_`{|}~]{8,20}$/.test(password);
};
```

##ÊúÄÂæå„Å´Ê≠£Â∏∏Á≥ª„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åó„Çá„ÅÜ

```JavaScript
import fc from 'fast-check';
.
.
.
describe('Positibe test', () => {
    test('Passwords only consisting proper characters{8,20} should be accepted', () => {
        fc.assert(
            fc.property(properString(8,20),(password:string) => {
                //   console.log(password);
                expect(validate(password)).toBe(true);
            })
        );
    });
});
```
„ÉÜ„Çπ„Éà„Éá„Éº„Çø„Çí„Åø„Å¶„Åø„Çã„Å®

```                                                                                                                                
    $!!9&CpJ"{                                                                                                                          
    %t$\x##AL                                                                                                                           
    !-${"$'rOMF!h/#'!'.)                                                                                                                
    ##ed;4NY4'#                                                                                                                         
    DuXy(4[>k^n`bdzFcQJ\                                                                                                                
    b[k!VT+Q;`{[&                                                                                                                       
    ,YNwD$YNc1T7\I7$ju                                                                                                                  
    m"&IH#&c.W- 
```
„ÅÇ„Çå„ÉÜ„Çπ„Éà„ÅåÂ§±Êïó„Åó„Åæ„Åó„Åü„Å≠
„ÉÜ„Çπ„Éà„ÅåÈÄö„Çã„Çà„ÅÜ„Å´ÂÆüË£Ö„ÇíÂ§âÊõ¥„Åó„Åæ„Åô

```JavaScript
export default function validate(password:string) :boolean {
    return !!password &&
        password.length >= 8 && 
        password.length <= 20 && 
        !/^[0-9]{8,20}$/.test(password) && 
        !/^[a-zA-Z]{8,20}$/.test(password) && 
        !/^[!"#$%&'()*+,.\-\/:;<=>?@\[\\\]^_`{|}~]{8,20}$/.test(password) &&
        /^[0-9a-zA-Z!"#$%&'()*+,.\-\/:;<=>?@\[\\\]^_`{|}~]{8,20}$/.test(password);
};
```
ÂÖ®ÈÉ®„ÅÆ„ÉÜ„Çπ„Éà„ÅåÈÄö„Çä„Åæ„Åó„Åü„Å≠„ÄÄ„ÇÅ„Åß„Åü„Åó„ÇÅ„Åß„Åü„Åó

```bash
$ npm test                                                                           
                                                                                                                                        
> fast-check-password-validator-example@1.0.0 test /home/fumikazu/fast-check-password-validator-example                                 
> jest                                                                                                                                  
                                                                                                                                        
 PASS  __tests__/password_validator.spec.ts (6.964s)
  spec 01 : the passwords is required
    ‚úì Passwords is required (9ms)
  spec 02 : the password should have a minimum of 8 characters and maximum of 20 characters
    ‚úì Passwords which length is less than 8 should be rejected (640ms)
    ‚úì Passwords which length is more than 20 should be rejected (1053ms)
  spec 03 : the password should be mixed alphabets , numbers and printable symbols
    ‚úì Passwords only consisting numbers{8,20} should be rejected (1897ms)
    ‚úì Passwords only consisting alphabets{8,20} should be rejected (821ms)
    ‚úì Passwords only consisting printable symbols{8,20} should be rejected (877ms)
  Positive test
    ‚úì Passwords only consisting proper characters{8,20} should be accepted (701ms)

Test Suites: 1 passed, 1 total
Tests:       7 passed, 7 total
Snapshots:   0 total
Time:        7.969s, estimated 8s                                                                                                       
Ran all test suites.                                 
```
#ÊúÄÂæå„Å´
Property based testing„ÅØÂæìÊù•„ÅÆ„ÉÜ„Çπ„Éà„ÇíÂÆåÂÖ®„Å´ÁΩÆ„ÅçÊèõ„Åà„Çã„ÇÇ„ÅÆ„Åß„ÅØ„Å™„ÅÑ„Åì„Å®„Å´Ê≥®ÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ „Çµ„É≥„Éó„É´„Éô„Éº„Çπ„ÅÆ„ÉÜ„Çπ„Éà„Å®ÊØîËºÉ„Åó„Å¶Â∫É„ÅÑÁØÑÂõ≤„ÅÆÂÖ•Âäõ„Çí„Ç´„Éê„Éº„Åó„ÄÅÊΩúÂú®ÁöÑ„Å™ÂïèÈ°å„ÇíÁô∫Ë¶ã„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ
„Åñ„Å£„Å®fast-check„Çí‰Ωø„Å£„Å¶Property based testing„ÇíÁ¥π‰ªã„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Åü„Åå„ÄÅ„ÅÑ„Åã„Åå„Åß„Åó„Çá„ÅÜ„ÅãÔºü
„Åæ„Åü‰ªäÂõû„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£„Éº„Éô„Éº„Çπ‰ª•Â§ñ„Å´„ÇÇfast-check„ÅØÁä∂ÊÖã„Çí„É©„É≥„ÉÄ„É†„Ç¶„Ç©„Éº„ÇØ„Åï„Åõ„Å¶Â§±Êïó„Åô„Çã„ÉÜ„Çπ„Éà„Ç±„Éº„Çπ„ÇíË¶ã„Å§„Åë„ÇãÊñπÊ≥ï„ÇÇÂÆüË£Ö„Åï„Çå„Å¶„Çã„Åø„Åü„ÅÑ„Åß„Åô„Å≠
https://github.com/dubzzz/fast-check/tree/master/example/004-stateMachine/musicPlayer

„Åæ„Åü„ÄÅ„Çµ„É≥„Éó„É´„Ç≥„Éº„Éâ„Å´„ÇÇ„ÅóÈñìÈÅï„ÅÑ„ÅÇ„Çä„Åæ„Åó„Åü„ÇâPull request„ÅØÂ§ßÊ≠ìËøé„Åß„Åô„ÄÇ
Èï∑„Åè„Å™„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„Åå„ÄÄÊúÄÂæå„Åæ„ÅßË™≠„Çì„Åß„ÅÑ„Åü„Å†„Åç„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åó„Åü„ÄÇ
